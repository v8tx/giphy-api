<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
	<title>Giphy API</title>
	<link rel="stylesheet" type="text/css" href="assets/css/reset.css">
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
  </head>

  <body>
    <div class="container">
    <h1 class="text-center">Giphy API</h1>

    <!-- Rendered buttons will get dumped Here  -->      
      <div class="col-md-12">
          <div id="animalButtons">
          </div>
      </div>

      <!-- animals will get dumped dere -->
      <div class="col-md-9">
      	<div id="animals-view"></div>
      </div>        
	  
	  <div class="col-md-3">
	      <form id="animal-form">
	        <label for="animal-input">Add an Animal</label>
	        <input type="text" id="animal-input"><br>

	        <!-- Button triggers new animal to be added -->
	        <input id="add-animal" type="submit" value="Submit">
	      </form>
	  </div>

      <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
      <script type="text/javascript">
				// Initial array of animals
				var animals = ["dog", "cat", "bird", "snake"];

				// displayAnimalInfo function re-renders the HTML to display the appropriate content
				function displayAnimalInfo() {

					var animal = $(this).attr("data-name");
					var queryURL = "http://api.giphy.com/v1/gifs/search?q=" + animal + "&api_key=dc6zaTOxFJmzC&limit=10";

					// Creating an AJAX call for the specific animal button being clicked
					$.ajax({ url: queryURL, method: "GET" }).done(function(response) {

						// Creating a div to hold the animal
						var animalDiv = $("<div class="animal">");

						// Storing the rating data
						var rating = response.Rated;

						// Creating an element to have the rating displayed
						var pOne = $("<p>").text("Rating: " + rating);

						// Displaying the rating
						animalDiv.append(pOne);

						// Creating an element to hold the image
						var image = $("<img>").attr("src", imgURL);

						// Appending the image
						animalDiv.append(image);

						// Putting the entire animal above the previous animals
						$("#animals-view").prepend(animalDiv);
					});

				}

				// Function for displaying animal data
				function renderButtons() {

					// Deleting the animals prior to adding new animals
					// (this is necessary otherwise you will have repeat buttons)
					$("#animalButtons").empty();

					// Looping through the array of animals
					for (var i = 0; i < animals.length; i++) {

						// Then dynamicaly generating buttons for each animal in the array
						// This code $("<button>") is all jQuery needs to create the beginning and end tag. (<button></button>)
						var a = $("<button>");
						// Adding a class of animal to our button
						a.addClass("animal");
						// Adding a data-attribute
						a.attr("data-name", animals[i]);
						// Providing the initial button text
						a.text(animals[i]);
						// Adding the button to the buttons-view div
						$("#buttons-view").append(a);
					}
				}

				// This function handles events where a animal button is clicked
				$("#add-animal").on("click", function(event) {
					event.preventDefault();
					// This line grabs the input from the textbox
					var animal = $("#animal-input").val().trim();

					// Adding animal from the textbox to our array
					animals.push(animal);

					// Calling renderButtons which handles the processing of our animal array
					renderButtons();
				});

				// Adding a click event listener to all elements with a class of "animal"
				$(document).on("click", ".animal", displayanimalInfo);

				// Calling the renderButtons function to display the intial buttons
				renderButtons();

			</script>
    </div>
  </body>
</html>
